---
title: "NRES 776 Lab 2"
subtitle: "Data I/O and visualization"
author: Sunny Tseng
format:
  revealjs: 
    slide-number: true
    preview-links: auto
    #css: styles.css
    #footer: <https://quarto.org>
    theme: [default, styles.scss]
    #smaller: true
    #scrollable: true
    incremental: true
    #embed-resources: true
    width: 1200
    fontsize: 1.7em
editor: visual
---

```{r setup, include = FALSE, cache=FALSE}
#| column: screen
#| out-width: 100%
#| fig-format: svg
library(palmerpenguins)
library(tidyverse)

knitr::opts_chunk$set(dpi = 150, fig.width = 8, out.width = "90%",
                      fig.align = "center", fig.asp = 0.45)

```


# Welcome to your second R lab!

## Our schedule today

-   Announcements (5 min)

-   Discussion paper presentation (35 mins)

-   Importing and exporting data in R (20 min)

-   Data visualization with R (60 min)

-   Quiet time for practice (60 min)

# Discussion paper presentation

-   Holly McVea
-   Josh Green
-   Carlie O'Brien

# Import (read) and Export (write) Data

With various packages

## Concept of working directory

> You have to tell R **where** to find your data

-   use read_csv() as an example, we need to specify the path

-   where are you now? and where is your data?

-   absolute path vs relative path

## R project

-   We have done this, but what this for?

<!-- -->

-   output .Rproj in a folder, for reading data

-   set up fires in computer

## R project step by step

## Be a good project manager

-   Create a project

-   Create folder structure

-   Save your R script and R project in the root

-   Only need to read using "docs/my_data.csv"

-   Try this for you lab

-   Try this for your research project/chapter

## Read excel files

## Read CSVs

## Read TSVs or TXTs

## Write CSVs

# Data Visualization Background

With `ggplot2` and `patchwork` package

Using `palmerpenguins` as example

## Our data set - Palmer Penguins!

### Yes, I love penguin data a lot :)


```{r}
penguins <- penguins %>%
  mutate(year = as.factor(year))
```

```{r, echo = TRUE}
glimpse(penguins)
```


-   4 categorical variables

-   4 continuous variables

![](images/paste-5A763184.png){.absolute top="300" right="0" width="629"}

::: aside
Artwork by @allison_horst
:::

## Your first plot!


```{r, echo = TRUE, eval = FALSE}
library(palmerpenguins)
library(ggplot2)

ggplot(data = penguins, aes(x = bill_length_mm, y = bill_depth_mm)) +
  geom_point(size = 2)
```


-   Create a new script

-   Copy/Paste or type this code to your script

-   Run it, by clicking the **Run** button or `Ctrl + Enter`

-   What do you get?

## wow `ggplot()`!


```{r, echo = TRUE}
library(palmerpenguins)
library(ggplot2)

ggplot(data = penguins, aes(x = bill_length_mm, y = bill_depth_mm)) +
  geom_point(size = 2)
```


![](images/paste-1081014A.png){.absolute top="300" right="0" width="504"}

::: aside
Artwork by @allison_horst
:::

## Piece by piece

## Create a canvas: `ggplot()`

## Aesthetic mapping: `aes()`

## Select plot type: `geom_*()`

### Plot layers are combined by `+`

### The order matters, from bottom to up

# Plot types

## What kind of plot types `geom_*()` in `ggplot2`

## `geom_histogram()`: histogram

## `geom_density()`: density plot

## `geom_barplot()`: bar plot

## `geom_point()`: scatter plot

## `geom_box()`: box plot

# Showing data by group

## Mapping aesthetics

-   group, colour, fill

## `facet_warp()`

## `facet_grid()`

# Trend line / regression lines

## `geom_smooth()`

# Customizing plots

## Labels

## Built-in themes

## Axes

## Aesthetics

## Legend placement

# Combining plots

# Saving plots

-   By RStudio

-   By save_image into different types

# Error Shooting

## What's wrong?

-   no installation of package

-   no bracket

-   wrong kind of bracket

-   ggplot2 package but the function is ggplot haha

-   no geom\_() specified

-   the theme is not working because of the sequence

-   fill and colour in bar plot!

# R Others: Miscellaneous

Here is some advanced materials if you are comfortable and familiar with the content above

## R `ggplot()` cheatsheet

## Commenting your code

## Short cuts

-   Ctrl + Enter

-   Ctrl +Shift + C

-   Ctrl + I

-   Ctrl + L

-   Esc

-   Ctrl + S

# Lab assignment

## Your task I

Using penguins data set

-   Create a histogram to show

-   Create a bar plot to show

-   Create a scatter plot to show

-   Create a box plot to show

Use patchwork to combine four figures together (two up, two down)

Bonus: Create one more figure from your own with a caption (what you try to convey) for it. Add it as the fifth plots in your patchwork

![](images/paste-B35E8558.png){fig-align="center"}

### Hints

1.  use `geom_hist()`
2.  use `geom_bar()`
3.  use `geom_scatter()`
4.  use `geom_box()`

## Submission

### Due next Wednesday 23:59 pm, Moodle

### Evaluation

-   File name and type (NRES776\_*firstname*\_*lastname*\_lab_2.png) (20%)

-   Quality of the figures (check lecture notes for data visualization background) (20%, 20%, 20%, 20%)

-   Bonus points for extra question, and general design of the figure layout (30%)

### Use of ChatGPT, stackflow, or...

-   Copy/Paste is your friend! (and never apologize for it!) üòç

-   But be sure you understand **why** the codes are doing what they are doing üßë‚Äçüéì

-   So that you form some new neuron connections in the brain üß†

## Quiet/Noisy room

![](images/d6b4f8cb-53bf-49d5-822c-e45cd01204a4.png){fig-align="center" width="867"}

::: footer
Artwork by @allison_horst
:::

## Wrap up

### Before we meet again

-   Have a nice food intake

-   Have a nap

-   Have a good break

### Next time

-   Will see you in 1.5 hours on zoom!

